(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{604:function(e,a,d){"use strict";d.r(a);var t=d(1),l=Object(t.a)({},(function(){var e=this,a=e.$createElement,d=e._self._c||a;return d("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[d("h1",{attrs:{id:"x-evidence"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#x-evidence"}},[e._v("#")]),e._v(" "),d("code",[e._v("x/evidence")])]),e._v(" "),d("ul",[d("li",[d("a",{attrs:{href:"#concepts"}},[e._v("Concepts")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#state"}},[e._v("State")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#messages"}},[e._v("Messages")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#events"}},[e._v("Events")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#parameters"}},[e._v("Parameters")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#beginblock"}},[e._v("BeginBlock")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#client"}},[e._v("Client")]),e._v(" "),d("ul",[d("li",[d("a",{attrs:{href:"#cli"}},[e._v("CLI")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#rest"}},[e._v("REST")])]),e._v(" "),d("li",[d("a",{attrs:{href:"#grpc"}},[e._v("gRPC")])])])])]),e._v(" "),d("h2",{attrs:{id:"abstract"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[e._v("#")]),e._v(" Abstract")]),e._v(" "),d("p",[d("code",[e._v("x/evidence")]),e._v(" is an implementation of a Cosmos SDK module, per "),d("a",{attrs:{href:"https://github.com/cosmos/cosmos-sdk/blob/main/docs/architecture/adr-009-evidence-module.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("ADR 009"),d("OutboundLink")],1),e._v(",\nthat allows for the submission and handling of arbitrary evidence of misbehavior such\nas equivocation and counterfactual signing.")]),e._v(" "),d("p",[e._v("The evidence module differs from standard evidence handling which typically expects the\nunderlying consensus engine, e.g. Tendermint, to automatically submit evidence when\nit is discovered by allowing clients and foreign chains to submit more complex evidence\ndirectly.")]),e._v(" "),d("p",[e._v("All concrete evidence types must implement the "),d("code",[e._v("Evidence")]),e._v(" interface contract. Submitted\n"),d("code",[e._v("Evidence")]),e._v(" is first routed through the evidence module's "),d("code",[e._v("Router")]),e._v(" in which it attempts\nto find a corresponding registered "),d("code",[e._v("Handler")]),e._v(" for that specific "),d("code",[e._v("Evidence")]),e._v(" type.\nEach "),d("code",[e._v("Evidence")]),e._v(" type must have a "),d("code",[e._v("Handler")]),e._v(" registered with the evidence module's\nkeeper in order for it to be successfully routed and executed.")]),e._v(" "),d("p",[e._v("Each corresponding handler must also fulfill the "),d("code",[e._v("Handler")]),e._v(" interface contract. The\n"),d("code",[e._v("Handler")]),e._v(" for a given "),d("code",[e._v("Evidence")]),e._v(" type can perform any arbitrary state transitions\nsuch as slashing, jailing, and tombstoning.")]),e._v(" "),d("h1",{attrs:{id:"concepts"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#concepts"}},[e._v("#")]),e._v(" Concepts")]),e._v(" "),d("h2",{attrs:{id:"evidence"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#evidence"}},[e._v("#")]),e._v(" Evidence")]),e._v(" "),d("p",[e._v("Any concrete type of evidence submitted to the "),d("code",[e._v("x/evidence")]),e._v(" module must fulfill the\n"),d("code",[e._v("Evidence")]),e._v(" contract outlined below. Not all concrete types of evidence will fulfill\nthis contract in the same way and some data may be entirely irrelevant to certain\ntypes of evidence. An additional "),d("code",[e._v("ValidatorEvidence")]),e._v(", which extends "),d("code",[e._v("Evidence")]),e._v(",\nhas also been created to define a contract for evidence against malicious validators.")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gRXZpZGVuY2UgZGVmaW5lcyB0aGUgY29udHJhY3Qgd2hpY2ggY29uY3JldGUgZXZpZGVuY2UgdHlwZXMgb2YgbWlzYmVoYXZpb3IKLy8gbXVzdCBpbXBsZW1lbnQuCnR5cGUgRXZpZGVuY2UgaW50ZXJmYWNlIHsKCXByb3RvLk1lc3NhZ2UKCglSb3V0ZSgpIHN0cmluZwoJVHlwZSgpIHN0cmluZwoJU3RyaW5nKCkgc3RyaW5nCglIYXNoKCkgdG1ieXRlcy5IZXhCeXRlcwoJVmFsaWRhdGVCYXNpYygpIGVycm9yCgoJLy8gSGVpZ2h0IGF0IHdoaWNoIHRoZSBpbmZyYWN0aW9uIG9jY3VycmVkCglHZXRIZWlnaHQoKSBpbnQ2NAp9CgovLyBWYWxpZGF0b3JFdmlkZW5jZSBleHRlbmRzIEV2aWRlbmNlIGludGVyZmFjZSB0byBkZWZpbmUgY29udHJhY3QKLy8gZm9yIGV2aWRlbmNlIGFnYWluc3QgbWFsaWNpb3VzIHZhbGlkYXRvcnMKdHlwZSBWYWxpZGF0b3JFdmlkZW5jZSBpbnRlcmZhY2UgewoJRXZpZGVuY2UKCgkvLyBUaGUgY29uc2Vuc3VzIGFkZHJlc3Mgb2YgdGhlIG1hbGljaW91cyB2YWxpZGF0b3IgYXQgdGltZSBvZiBpbmZyYWN0aW9uCglHZXRDb25zZW5zdXNBZGRyZXNzKCkgc2RrLkNvbnNBZGRyZXNzCgoJLy8gVGhlIHRvdGFsIHBvd2VyIG9mIHRoZSBtYWxpY2lvdXMgdmFsaWRhdG9yIGF0IHRpbWUgb2YgaW5mcmFjdGlvbgoJR2V0VmFsaWRhdG9yUG93ZXIoKSBpbnQ2NAoKCS8vIFRoZSB0b3RhbCB2YWxpZGF0b3Igc2V0IHBvd2VyIGF0IHRpbWUgb2YgaW5mcmFjdGlvbgoJR2V0VG90YWxQb3dlcigpIGludDY0Cn0K"}}),e._v(" "),d("h2",{attrs:{id:"registration-handling"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#registration-handling"}},[e._v("#")]),e._v(" Registration & Handling")]),e._v(" "),d("p",[e._v("The "),d("code",[e._v("x/evidence")]),e._v(" module must first know about all types of evidence it is expected\nto handle. This is accomplished by registering the "),d("code",[e._v("Route")]),e._v(" method in the "),d("code",[e._v("Evidence")]),e._v("\ncontract with what is known as a "),d("code",[e._v("Router")]),e._v(" (defined below). The "),d("code",[e._v("Router")]),e._v(" accepts\n"),d("code",[e._v("Evidence")]),e._v(" and attempts to find the corresponding "),d("code",[e._v("Handler")]),e._v(" for the "),d("code",[e._v("Evidence")]),e._v("\nvia the "),d("code",[e._v("Route")]),e._v(" method.")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBSb3V0ZXIgaW50ZXJmYWNlIHsKICBBZGRSb3V0ZShyIHN0cmluZywgaCBIYW5kbGVyKSBSb3V0ZXIKICBIYXNSb3V0ZShyIHN0cmluZykgYm9vbAogIEdldFJvdXRlKHBhdGggc3RyaW5nKSBIYW5kbGVyCiAgU2VhbCgpCiAgU2VhbGVkKCkgYm9vbAp9Cg=="}}),e._v(" "),d("p",[e._v("The "),d("code",[e._v("Handler")]),e._v(" (defined below) is responsible for executing the entirety of the\nbusiness logic for handling "),d("code",[e._v("Evidence")]),e._v(". This typically includes validating the\nevidence, both stateless checks via "),d("code",[e._v("ValidateBasic")]),e._v(" and stateful checks via any\nkeepers provided to the "),d("code",[e._v("Handler")]),e._v(". In addition, the "),d("code",[e._v("Handler")]),e._v(" may also perform\ncapabilities such as slashing and jailing a validator. All "),d("code",[e._v("Evidence")]),e._v(" handled\nby the "),d("code",[e._v("Handler")]),e._v(" should be persisted.")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gSGFuZGxlciBkZWZpbmVzIGFuIGFnbm9zdGljIEV2aWRlbmNlIGhhbmRsZXIuIFRoZSBoYW5kbGVyIGlzIHJlc3BvbnNpYmxlCi8vIGZvciBleGVjdXRpbmcgYWxsIGNvcnJlc3BvbmRpbmcgYnVzaW5lc3MgbG9naWMgbmVjZXNzYXJ5IGZvciB2ZXJpZnlpbmcgdGhlCi8vIGV2aWRlbmNlIGFzIHZhbGlkLiBJbiBhZGRpdGlvbiwgdGhlIEhhbmRsZXIgbWF5IGV4ZWN1dGUgYW55IG5lY2Vzc2FyeQovLyBzbGFzaGluZyBhbmQgcG90ZW50aWFsIGphaWxpbmcuCnR5cGUgSGFuZGxlciBmdW5jKHNkay5Db250ZXh0LCBFdmlkZW5jZSkgZXJyb3IK"}}),e._v(" "),d("h1",{attrs:{id:"state"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[e._v("#")]),e._v(" State")]),e._v(" "),d("p",[e._v("Currently the "),d("code",[e._v("x/evidence")]),e._v(" module only stores valid submitted "),d("code",[e._v("Evidence")]),e._v(" in state.\nThe evidence state is also stored and exported in the "),d("code",[e._v("x/evidence")]),e._v(" module's "),d("code",[e._v("GenesisState")]),e._v(".")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"Ly8gR2VuZXNpc1N0YXRlIGRlZmluZXMgdGhlIGV2aWRlbmNlIG1vZHVsZSdzIGdlbmVzaXMgc3RhdGUuCm1lc3NhZ2UgR2VuZXNpc1N0YXRlIHsKICAvLyBldmlkZW5jZSBkZWZpbmVzIGFsbCB0aGUgZXZpZGVuY2UgYXQgZ2VuZXNpcy4KICByZXBlYXRlZCBnb29nbGUucHJvdG9idWYuQW55IGV2aWRlbmNlID0gMTsKfQoK"}}),e._v(" "),d("p",[e._v("All "),d("code",[e._v("Evidence")]),e._v(" is retrieved and stored via a prefix "),d("code",[e._v("KVStore")]),e._v(" using prefix "),d("code",[e._v("0x00")]),e._v(" ("),d("code",[e._v("KeyPrefixEvidence")]),e._v(").")]),e._v(" "),d("h1",{attrs:{id:"messages"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#messages"}},[e._v("#")]),e._v(" Messages")]),e._v(" "),d("h2",{attrs:{id:"msgsubmitevidence"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#msgsubmitevidence"}},[e._v("#")]),e._v(" MsgSubmitEvidence")]),e._v(" "),d("p",[e._v("Evidence is submitted through a "),d("code",[e._v("MsgSubmitEvidence")]),e._v(" message:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"Ly8gTXNnU3VibWl0RXZpZGVuY2UgcmVwcmVzZW50cyBhIG1lc3NhZ2UgdGhhdCBzdXBwb3J0cyBzdWJtaXR0aW5nIGFyYml0cmFyeQovLyBFdmlkZW5jZSBvZiBtaXNiZWhhdmlvciBzdWNoIGFzIGVxdWl2b2NhdGlvbiBvciBjb3VudGVyZmFjdHVhbCBzaWduaW5nLgptZXNzYWdlIE1zZ1N1Ym1pdEV2aWRlbmNlIHsKICBzdHJpbmcgICAgICAgICAgICAgIHN1Ym1pdHRlciA9IDE7CiAgZ29vZ2xlLnByb3RvYnVmLkFueSBldmlkZW5jZSAgPSAyOwp9Cg=="}}),e._v(" "),d("p",[e._v("Note, the "),d("code",[e._v("Evidence")]),e._v(" of a "),d("code",[e._v("MsgSubmitEvidence")]),e._v(" message must have a corresponding\n"),d("code",[e._v("Handler")]),e._v(" registered with the "),d("code",[e._v("x/evidence")]),e._v(" module's "),d("code",[e._v("Router")]),e._v(" in order to be processed\nand routed correctly.")]),e._v(" "),d("p",[e._v("Given the "),d("code",[e._v("Evidence")]),e._v(" is registered with a corresponding "),d("code",[e._v("Handler")]),e._v(", it is processed\nas follows:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBTdWJtaXRFdmlkZW5jZShjdHggQ29udGV4dCwgZXZpZGVuY2UgRXZpZGVuY2UpIGVycm9yIHsKICBpZiBfLCBvayA6PSBHZXRFdmlkZW5jZShjdHgsIGV2aWRlbmNlLkhhc2goKSk7IG9rIHsKICAgIHJldHVybiBzZGtlcnJvcnMuV3JhcCh0eXBlcy5FcnJFdmlkZW5jZUV4aXN0cywgZXZpZGVuY2UuSGFzaCgpLlN0cmluZygpKQogIH0KICBpZiAhcm91dGVyLkhhc1JvdXRlKGV2aWRlbmNlLlJvdXRlKCkpIHsKICAgIHJldHVybiBzZGtlcnJvcnMuV3JhcCh0eXBlcy5FcnJOb0V2aWRlbmNlSGFuZGxlckV4aXN0cywgZXZpZGVuY2UuUm91dGUoKSkKICB9CgogIGhhbmRsZXIgOj0gcm91dGVyLkdldFJvdXRlKGV2aWRlbmNlLlJvdXRlKCkpCiAgaWYgZXJyIDo9IGhhbmRsZXIoY3R4LCBldmlkZW5jZSk7IGVyciAhPSBuaWwgewogICAgcmV0dXJuIHNka2Vycm9ycy5XcmFwKHR5cGVzLkVyckludmFsaWRFdmlkZW5jZSwgZXJyLkVycm9yKCkpCiAgfQoKICBjdHguRXZlbnRNYW5hZ2VyKCkuRW1pdEV2ZW50KAoJCXNkay5OZXdFdmVudCgKCQkJdHlwZXMuRXZlbnRUeXBlU3VibWl0RXZpZGVuY2UsCgkJCXNkay5OZXdBdHRyaWJ1dGUodHlwZXMuQXR0cmlidXRlS2V5RXZpZGVuY2VIYXNoLCBldmlkZW5jZS5IYXNoKCkuU3RyaW5nKCkpLAoJCSksCgkpCgogIFNldEV2aWRlbmNlKGN0eCwgZXZpZGVuY2UpCiAgcmV0dXJuIG5pbAp9Cg=="}}),e._v(" "),d("p",[e._v("First, there must not already exist valid submitted "),d("code",[e._v("Evidence")]),e._v(" of the exact same\ntype. Secondly, the "),d("code",[e._v("Evidence")]),e._v(" is routed to the "),d("code",[e._v("Handler")]),e._v(" and executed. Finally,\nif there is no error in handling the "),d("code",[e._v("Evidence")]),e._v(", an event is emitted and it is persisted to state.")]),e._v(" "),d("h1",{attrs:{id:"events"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[e._v("#")]),e._v(" Events")]),e._v(" "),d("p",[e._v("The "),d("code",[e._v("x/evidence")]),e._v(" module emits the following events:")]),e._v(" "),d("h2",{attrs:{id:"handlers"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#handlers"}},[e._v("#")]),e._v(" Handlers")]),e._v(" "),d("h3",{attrs:{id:"msgsubmitevidence-2"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#msgsubmitevidence-2"}},[e._v("#")]),e._v(" MsgSubmitEvidence")]),e._v(" "),d("table",[d("thead",[d("tr",[d("th",[e._v("Type")]),e._v(" "),d("th",[e._v("Attribute Key")]),e._v(" "),d("th",[e._v("Attribute Value")])])]),e._v(" "),d("tbody",[d("tr",[d("td",[e._v("submit_evidence")]),e._v(" "),d("td",[e._v("evidence_hash")]),e._v(" "),d("td")]),e._v(" "),d("tr",[d("td",[e._v("message")]),e._v(" "),d("td",[e._v("module")]),e._v(" "),d("td",[e._v("evidence")])]),e._v(" "),d("tr",[d("td",[e._v("message")]),e._v(" "),d("td",[e._v("sender")]),e._v(" "),d("td")]),e._v(" "),d("tr",[d("td",[e._v("message")]),e._v(" "),d("td",[e._v("action")]),e._v(" "),d("td",[e._v("submit_evidence")])])])]),e._v(" "),d("h1",{attrs:{id:"parameters"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[e._v("#")]),e._v(" Parameters")]),e._v(" "),d("p",[e._v("The evidence module does not contain any parameters.")]),e._v(" "),d("h1",{attrs:{id:"beginblock"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#beginblock"}},[e._v("#")]),e._v(" BeginBlock")]),e._v(" "),d("h2",{attrs:{id:"evidence-handling"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#evidence-handling"}},[e._v("#")]),e._v(" Evidence Handling")]),e._v(" "),d("p",[e._v("Tendermint blocks can include\n"),d("a",{attrs:{href:"https://github.com/tendermint/tendermint/blob/master/docs/spec/blockchain/blockchain.md#evidence",target:"_blank",rel:"noopener noreferrer"}},[e._v("Evidence"),d("OutboundLink")],1),e._v(" that indicates if a validator committed malicious behavior. The relevant information is forwarded to the application as ABCI Evidence in "),d("code",[e._v("abci.RequestBeginBlock")]),e._v(" so that the validator can be punished accordingly.")]),e._v(" "),d("h3",{attrs:{id:"equivocation"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#equivocation"}},[e._v("#")]),e._v(" Equivocation")]),e._v(" "),d("p",[e._v("The Cosmos SDK handles two types of evidence inside the ABCI "),d("code",[e._v("BeginBlock")]),e._v(":")]),e._v(" "),d("ul",[d("li",[d("code",[e._v("DuplicateVoteEvidence")]),e._v(",")]),e._v(" "),d("li",[d("code",[e._v("LightClientAttackEvidence")]),e._v(".")])]),e._v(" "),d("p",[e._v("The evidence module handles these two evidence types the same way. First, the Cosmos SDK converts the Tendermint concrete evidence type to an SDK "),d("code",[e._v("Evidence")]),e._v(" interface using "),d("code",[e._v("Equivocation")]),e._v(" as the concrete type.")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"Ly8gRXF1aXZvY2F0aW9uIGltcGxlbWVudHMgdGhlIEV2aWRlbmNlIGludGVyZmFjZS4KbWVzc2FnZSBFcXVpdm9jYXRpb24gewogIGludDY0ICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICAgICAgICAgICAgPSAxOwogIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgdGltZSAgICAgICAgICAgICAgPSAyOwogIGludDY0ICAgICAgICAgICAgICAgICAgICAgcG93ZXIgICAgICAgICAgICAgPSAzOwogIHN0cmluZyAgICAgICAgICAgICAgICAgICAgY29uc2Vuc3VzX2FkZHJlc3MgPSA0Owp9Cg=="}}),e._v(" "),d("p",[e._v("For some "),d("code",[e._v("Equivocation")]),e._v(" submitted in "),d("code",[e._v("block")]),e._v(" to be valid, it must satisfy:")]),e._v(" "),d("p",[d("code",[e._v("Evidence.Timestamp >= block.Timestamp - MaxEvidenceAge")])]),e._v(" "),d("p",[e._v("Where:")]),e._v(" "),d("ul",[d("li",[d("code",[e._v("Evidence.Timestamp")]),e._v(" is the timestamp in the block at height "),d("code",[e._v("Evidence.Height")])]),e._v(" "),d("li",[d("code",[e._v("block.Timestamp")]),e._v(" is the current block timestamp.")])]),e._v(" "),d("p",[e._v("If valid "),d("code",[e._v("Equivocation")]),e._v(" evidence is included in a block, the validator's stake is\nreduced (slashed) by "),d("code",[e._v("SlashFractionDoubleSign")]),e._v(" as defined by the "),d("code",[e._v("x/slashing")]),e._v(' module\nof what their stake was when the infraction occurred, rather than when the evidence was discovered.\nWe want to "follow the stake", i.e., the stake that contributed to the infraction\nshould be slashed, even if it has since been redelegated or started unbonding.')]),e._v(" "),d("p",[e._v("In addition, the validator is permanently jailed and tombstoned to make it impossible for that\nvalidator to ever re-enter the validator set.")]),e._v(" "),d("p",[e._v("The "),d("code",[e._v("Equivocation")]),e._v(" evidence is handled as follows:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBLZWVwZXIpIEhhbmRsZUVxdWl2b2NhdGlvbkV2aWRlbmNlKGN0eCBzZGsuQ29udGV4dCwgZXZpZGVuY2UgKnR5cGVzLkVxdWl2b2NhdGlvbikgewoJbG9nZ2VyIDo9IGsuTG9nZ2VyKGN0eCkKCWNvbnNBZGRyIDo9IGV2aWRlbmNlLkdldENvbnNlbnN1c0FkZHJlc3MoKQoKCWlmIF8sIGVyciA6PSBrLnNsYXNoaW5nS2VlcGVyLkdldFB1YmtleShjdHgsIGNvbnNBZGRyLkJ5dGVzKCkpOyBlcnIgIT0gbmlsIHsKCQkvLyBJZ25vcmUgZXZpZGVuY2UgdGhhdCBjYW5ub3QgYmUgaGFuZGxlZC4KCQkvLwoJCS8vIE5PVEU6IFdlIHVzZWQgdG8gcGFuaWMgd2l0aDoKCQkvLyBgcGFuaWMoZm10LlNwcmludGYoJnF1b3Q7VmFsaWRhdG9yIGNvbnNlbnN1cy1hZGRyZXNzICV2IG5vdCBmb3VuZCZxdW90OywgY29uc0FkZHIpKWAsCgkJLy8gYnV0IHRoaXMgY291cGxlcyB0aGUgZXhwZWN0YXRpb25zIG9mIHRoZSBhcHAgdG8gYm90aCBUZW5kZXJtaW50IGFuZAoJCS8vIHRoZSBzaW11bGF0b3IuICBCb3RoIGFyZSBleHBlY3RlZCB0byBwcm92aWRlIHRoZSBmdWxsIHJhbmdlIG9mCgkJLy8gYWxsb3dhYmxlIGJ1dCBub25lIG9mIHRoZSBkaXNhbGxvd2VkIGV2aWRlbmNlIHR5cGVzLiAgSW5zdGVhZCBvZgoJCS8vIGdldHRpbmcgdGhpcyBjb29yZGluYXRpb24gcmlnaHQsIGl0IGlzIGVhc2llciB0byByZWxheCB0aGUKCQkvLyBjb25zdHJhaW50cyBhbmQgaWdub3JlIGV2aWRlbmNlIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQuCgkJcmV0dXJuCgl9CgoJLy8gY2FsY3VsYXRlIHRoZSBhZ2Ugb2YgdGhlIGV2aWRlbmNlCglpbmZyYWN0aW9uSGVpZ2h0IDo9IGV2aWRlbmNlLkdldEhlaWdodCgpCglpbmZyYWN0aW9uVGltZSA6PSBldmlkZW5jZS5HZXRUaW1lKCkKCWFnZUR1cmF0aW9uIDo9IGN0eC5CbG9ja0hlYWRlcigpLlRpbWUuU3ViKGluZnJhY3Rpb25UaW1lKQoJYWdlQmxvY2tzIDo9IGN0eC5CbG9ja0hlYWRlcigpLkhlaWdodCAtIGluZnJhY3Rpb25IZWlnaHQKCgkvLyBSZWplY3QgZXZpZGVuY2UgaWYgdGhlIGRvdWJsZS1zaWduIGlzIHRvbyBvbGQuIEV2aWRlbmNlIGlzIGNvbnNpZGVyZWQgc3RhbGUKCS8vIGlmIHRoZSBkaWZmZXJlbmNlIGluIHRpbWUgYW5kIG51bWJlciBvZiBibG9ja3MgaXMgZ3JlYXRlciB0aGFuIHRoZSBhbGxvd2VkCgkvLyBwYXJhbWV0ZXJzIGRlZmluZWQuCgljcCA6PSBjdHguQ29uc2Vuc3VzUGFyYW1zKCkKCWlmIGNwICE9IG5pbCAmYW1wOyZhbXA7IGNwLkV2aWRlbmNlICE9IG5pbCB7CgkJaWYgYWdlRHVyYXRpb24gJmd0OyBjcC5FdmlkZW5jZS5NYXhBZ2VEdXJhdGlvbiAmYW1wOyZhbXA7IGFnZUJsb2NrcyAmZ3Q7IGNwLkV2aWRlbmNlLk1heEFnZU51bUJsb2NrcyB7CgkJCWxvZ2dlci5JbmZvKAoJCQkJJnF1b3Q7aWdub3JlZCBlcXVpdm9jYXRpb247IGV2aWRlbmNlIHRvbyBvbGQmcXVvdDssCgkJCQkmcXVvdDt2YWxpZGF0b3ImcXVvdDssIGNvbnNBZGRyLAoJCQkJJnF1b3Q7aW5mcmFjdGlvbl9oZWlnaHQmcXVvdDssIGluZnJhY3Rpb25IZWlnaHQsCgkJCQkmcXVvdDttYXhfYWdlX251bV9ibG9ja3MmcXVvdDssIGNwLkV2aWRlbmNlLk1heEFnZU51bUJsb2NrcywKCQkJCSZxdW90O2luZnJhY3Rpb25fdGltZSZxdW90OywgaW5mcmFjdGlvblRpbWUsCgkJCQkmcXVvdDttYXhfYWdlX2R1cmF0aW9uJnF1b3Q7LCBjcC5FdmlkZW5jZS5NYXhBZ2VEdXJhdGlvbiwKCQkJKQoJCQlyZXR1cm4KCQl9Cgl9CgoJdmFsaWRhdG9yIDo9IGsuc3Rha2luZ0tlZXBlci5WYWxpZGF0b3JCeUNvbnNBZGRyKGN0eCwgY29uc0FkZHIpCglpZiB2YWxpZGF0b3IgPT0gbmlsIHx8IHZhbGlkYXRvci5Jc1VuYm9uZGVkKCkgewoJCS8vIERlZmVuc2l2ZTogU2ltdWxhdGlvbiBkb2Vzbid0IHRha2UgdW5ib25kaW5nIHBlcmlvZHMgaW50byBhY2NvdW50LCBhbmQKCQkvLyBUZW5kZXJtaW50IG1pZ2h0IGJyZWFrIHRoaXMgYXNzdW1wdGlvbiBhdCBzb21lIHBvaW50LgoJCXJldHVybgoJfQoKCWlmIG9rIDo9IGsuc2xhc2hpbmdLZWVwZXIuSGFzVmFsaWRhdG9yU2lnbmluZ0luZm8oY3R4LCBjb25zQWRkcik7ICFvayB7CgkJcGFuaWMoZm10LlNwcmludGYoJnF1b3Q7ZXhwZWN0ZWQgc2lnbmluZyBpbmZvIGZvciB2YWxpZGF0b3IgJXMgYnV0IG5vdCBmb3VuZCZxdW90OywgY29uc0FkZHIpKQoJfQoKCS8vIGlnbm9yZSBpZiB0aGUgdmFsaWRhdG9yIGlzIGFscmVhZHkgdG9tYnN0b25lZAoJaWYgay5zbGFzaGluZ0tlZXBlci5Jc1RvbWJzdG9uZWQoY3R4LCBjb25zQWRkcikgewoJCWxvZ2dlci5JbmZvKAoJCQkmcXVvdDtpZ25vcmVkIGVxdWl2b2NhdGlvbjsgdmFsaWRhdG9yIGFscmVhZHkgdG9tYnN0b25lZCZxdW90OywKCQkJJnF1b3Q7dmFsaWRhdG9yJnF1b3Q7LCBjb25zQWRkciwKCQkJJnF1b3Q7aW5mcmFjdGlvbl9oZWlnaHQmcXVvdDssIGluZnJhY3Rpb25IZWlnaHQsCgkJCSZxdW90O2luZnJhY3Rpb25fdGltZSZxdW90OywgaW5mcmFjdGlvblRpbWUsCgkJKQoJCXJldHVybgoJfQoKCWxvZ2dlci5JbmZvKAoJCSZxdW90O2NvbmZpcm1lZCBlcXVpdm9jYXRpb24mcXVvdDssCgkJJnF1b3Q7dmFsaWRhdG9yJnF1b3Q7LCBjb25zQWRkciwKCQkmcXVvdDtpbmZyYWN0aW9uX2hlaWdodCZxdW90OywgaW5mcmFjdGlvbkhlaWdodCwKCQkmcXVvdDtpbmZyYWN0aW9uX3RpbWUmcXVvdDssIGluZnJhY3Rpb25UaW1lLAoJKQoKCS8vIFdlIG5lZWQgdG8gcmV0cmlldmUgdGhlIHN0YWtlIGRpc3RyaWJ1dGlvbiB3aGljaCBzaWduZWQgdGhlIGJsb2NrLCBzbyB3ZQoJLy8gc3VidHJhY3QgVmFsaWRhdG9yVXBkYXRlRGVsYXkgZnJvbSB0aGUgZXZpZGVuY2UgaGVpZ2h0LgoJLy8gTm90ZSwgdGhhdCB0aGlzICpjYW4qIHJlc3VsdCBpbiBhIG5lZ2F0aXZlICZxdW90O2Rpc3RyaWJ1dGlvbkhlaWdodCZxdW90OywgdXAgdG8KCS8vIC1WYWxpZGF0b3JVcGRhdGVEZWxheSwgaS5lLiBhdCB0aGUgZW5kIG9mIHRoZQoJLy8gcHJlLWdlbmVzaXMgYmxvY2sgKG5vbmUpID0gYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZ2VuZXNpcyBibG9jay4KCS8vIFRoYXQncyBmaW5lIHNpbmNlIHRoaXMgaXMganVzdCB1c2VkIHRvIGZpbHRlciB1bmJvbmRpbmcgZGVsZWdhdGlvbnMgJmFtcDsgcmVkZWxlZ2F0aW9ucy4KCWRpc3RyaWJ1dGlvbkhlaWdodCA6PSBpbmZyYWN0aW9uSGVpZ2h0IC0gc2RrLlZhbGlkYXRvclVwZGF0ZURlbGF5CgoJLy8gU2xhc2ggdmFsaWRhdG9yLiBUaGUgYHBvd2VyYCBpcyB0aGUgaW50NjQgcG93ZXIgb2YgdGhlIHZhbGlkYXRvciBhcyBwcm92aWRlZAoJLy8gdG8vYnkgVGVuZGVybWludC4gVGhpcyB2YWx1ZSBpcyB2YWxpZGF0b3IuVG9rZW5zIGFzIHNlbnQgdG8gVGVuZGVybWludCB2aWEKCS8vIEFCQ0ksIGFuZCBub3cgcmVjZWl2ZWQgYXMgZXZpZGVuY2UuIFRoZSBmcmFjdGlvbiBpcyBwYXNzZWQgaW4gdG8gc2VwYXJhdGVseQoJLy8gdG8gc2xhc2ggdW5ib25kaW5nIGFuZCByZWJvbmRpbmcgZGVsZWdhdGlvbnMuCglrLnNsYXNoaW5nS2VlcGVyLlNsYXNoKAoJCWN0eCwKCQljb25zQWRkciwKCQlrLnNsYXNoaW5nS2VlcGVyLlNsYXNoRnJhY3Rpb25Eb3VibGVTaWduKGN0eCksCgkJZXZpZGVuY2UuR2V0VmFsaWRhdG9yUG93ZXIoKSwgZGlzdHJpYnV0aW9uSGVpZ2h0LAoJKQoKCS8vIEphaWwgdGhlIHZhbGlkYXRvciBpZiBub3QgYWxyZWFkeSBqYWlsZWQuIFRoaXMgd2lsbCBiZWdpbiB1bmJvbmRpbmcgdGhlCgkvLyB2YWxpZGF0b3IgaWYgbm90IGFscmVhZHkgdW5ib25kaW5nICh0b21ic3RvbmVkKS4KCWlmICF2YWxpZGF0b3IuSXNKYWlsZWQoKSB7CgkJay5zbGFzaGluZ0tlZXBlci5KYWlsKGN0eCwgY29uc0FkZHIpCgl9CgoJay5zbGFzaGluZ0tlZXBlci5KYWlsVW50aWwoY3R4LCBjb25zQWRkciwgdHlwZXMuRG91YmxlU2lnbkphaWxFbmRUaW1lKQoJay5zbGFzaGluZ0tlZXBlci5Ub21ic3RvbmUoY3R4LCBjb25zQWRkcikKfQo="}}),e._v(" "),d("p",[d("strong",[e._v("Note:")]),e._v(" The slashing, jailing, and tombstoning calls are delegated through the "),d("code",[e._v("x/slashing")]),e._v(" module\nthat emits informative events and finally delegates calls to the "),d("code",[e._v("x/staking")]),e._v(" module. See documentation\non slashing and jailing in "),d("RouterLink",{attrs:{to:"/.././cosmos-sdk/x/staking/spec/02_state_transitions.html"}},[e._v("State Transitions")]),e._v(".")],1),e._v(" "),d("h1",{attrs:{id:"client"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#client"}},[e._v("#")]),e._v(" Client")]),e._v(" "),d("h2",{attrs:{id:"cli"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#cli"}},[e._v("#")]),e._v(" CLI")]),e._v(" "),d("p",[e._v("A user can query and interact with the "),d("code",[e._v("evidence")]),e._v(" module using the CLI.")]),e._v(" "),d("h3",{attrs:{id:"query"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[e._v("#")]),e._v(" Query")]),e._v(" "),d("p",[e._v("The "),d("code",[e._v("query")]),e._v(" commands allows users to query "),d("code",[e._v("evidence")]),e._v(" state.")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c2ltZCBxdWVyeSBldmlkZW5jZSAtLWhlbHAK"}}),e._v(" "),d("h3",{attrs:{id:"evidence-2"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#evidence-2"}},[e._v("#")]),e._v(" evidence")]),e._v(" "),d("p",[e._v("The "),d("code",[e._v("evidence")]),e._v(" command allows users to list all evidence or evidence by hash.")]),e._v(" "),d("p",[e._v("Usage:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c2ltZCBxdWVyeSBldmlkZW5jZSBbZmxhZ3NdCg=="}}),e._v(" "),d("p",[e._v("To query evidence by hash")]),e._v(" "),d("p",[e._v("Example:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c2ltZCBxdWVyeSBldmlkZW5jZSAmcXVvdDtERjBDMjNFODYzNEU0ODBGODRCOUQ1Njc0QTdDREM5ODE2NDY2REVDMjhBMzM1OEY3MzI2MEY2OEQyOEQ3NjYwJnF1b3Q7Cg=="}}),e._v(" "),d("p",[e._v("Example Output:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXZpZGVuY2U6CiAgY29uc2Vuc3VzX2FkZHJlc3M6IGNvc21vc3ZhbGNvbnMxbnRrOGV1YWxld3VwcnowZ2FtaDhobnZjZW0ybnJjZHNnejU2M2gKICBoZWlnaHQ6IDExCiAgcG93ZXI6IDEwMAogIHRpbWU6ICZxdW90OzIwMjEtMTAtMjBUMTY6MDg6MzguMTk0MDE3NjI0WiZxdW90Owo="}}),e._v(" "),d("p",[e._v("To get all evidence")]),e._v(" "),d("p",[e._v("Example:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c2ltZCBxdWVyeSBldmlkZW5jZQo="}}),e._v(" "),d("p",[e._v("Example Output:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXZpZGVuY2U6CiAgY29uc2Vuc3VzX2FkZHJlc3M6IGNvc21vc3ZhbGNvbnMxbnRrOGV1YWxld3VwcnowZ2FtaDhobnZjZW0ybnJjZHNnejU2M2gKICBoZWlnaHQ6IDExCiAgcG93ZXI6IDEwMAogIHRpbWU6ICZxdW90OzIwMjEtMTAtMjBUMTY6MDg6MzguMTk0MDE3NjI0WiZxdW90OwpwYWdpbmF0aW9uOgogIG5leHRfa2V5OiBudWxsCiAgdG90YWw6ICZxdW90OzEmcXVvdDsK"}}),e._v(" "),d("h2",{attrs:{id:"rest"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#rest"}},[e._v("#")]),e._v(" REST")]),e._v(" "),d("p",[e._v("A user can query the "),d("code",[e._v("evidence")]),e._v(" module using REST endpoints.")]),e._v(" "),d("h3",{attrs:{id:"evidence-3"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#evidence-3"}},[e._v("#")]),e._v(" Evidence")]),e._v(" "),d("p",[e._v("Get evidence by hash")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"L2Nvc21vcy9ldmlkZW5jZS92MWJldGExL2V2aWRlbmNlL3tldmlkZW5jZV9oYXNofQo="}}),e._v(" "),d("p",[e._v("Example:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Y3VybCAtWCBHRVQgJnF1b3Q7aHR0cDovL2xvY2FsaG9zdDoxMzE3L2Nvc21vcy9ldmlkZW5jZS92MWJldGExL2V2aWRlbmNlL0RGMEMyM0U4NjM0RTQ4MEY4NEI5RDU2NzRBN0NEQzk4MTY0NjZERUMyOEEzMzU4RjczMjYwRjY4RDI4RDc2NjAmcXVvdDsK"}}),e._v(" "),d("p",[e._v("Example Output:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ewogICZxdW90O2V2aWRlbmNlJnF1b3Q7OiB7CiAgICAmcXVvdDtjb25zZW5zdXNfYWRkcmVzcyZxdW90OzogJnF1b3Q7Y29zbW9zdmFsY29uczFudGs4ZXVhbGV3dXByejBnYW1oOGhudmNlbTJucmNkc2d6NTYzaCZxdW90OywKICAgICZxdW90O2hlaWdodCZxdW90OzogJnF1b3Q7MTEmcXVvdDssCiAgICAmcXVvdDtwb3dlciZxdW90OzogJnF1b3Q7MTAwJnF1b3Q7LAogICAgJnF1b3Q7dGltZSZxdW90OzogJnF1b3Q7MjAyMS0xMC0yMFQxNjowODozOC4xOTQwMTc2MjRaJnF1b3Q7CiAgfQp9Cg=="}}),e._v(" "),d("h3",{attrs:{id:"all-evidence"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#all-evidence"}},[e._v("#")]),e._v(" All evidence")]),e._v(" "),d("p",[e._v("Get all evidence")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"L2Nvc21vcy9ldmlkZW5jZS92MWJldGExL2V2aWRlbmNlCg=="}}),e._v(" "),d("p",[e._v("Example:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Y3VybCAtWCBHRVQgJnF1b3Q7aHR0cDovL2xvY2FsaG9zdDoxMzE3L2Nvc21vcy9ldmlkZW5jZS92MWJldGExL2V2aWRlbmNlJnF1b3Q7Cg=="}}),e._v(" "),d("p",[e._v("Example Output:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ewogICZxdW90O2V2aWRlbmNlJnF1b3Q7OiBbCiAgICB7CiAgICAgICZxdW90O2NvbnNlbnN1c19hZGRyZXNzJnF1b3Q7OiAmcXVvdDtjb3Ntb3N2YWxjb25zMW50azhldWFsZXd1cHJ6MGdhbWg4aG52Y2VtMm5yY2RzZ3o1NjNoJnF1b3Q7LAogICAgICAmcXVvdDtoZWlnaHQmcXVvdDs6ICZxdW90OzExJnF1b3Q7LAogICAgICAmcXVvdDtwb3dlciZxdW90OzogJnF1b3Q7MTAwJnF1b3Q7LAogICAgICAmcXVvdDt0aW1lJnF1b3Q7OiAmcXVvdDsyMDIxLTEwLTIwVDE2OjA4OjM4LjE5NDAxNzYyNFomcXVvdDsKICAgIH0KICBdLAogICZxdW90O3BhZ2luYXRpb24mcXVvdDs6IHsKICAgICZxdW90O3RvdGFsJnF1b3Q7OiAmcXVvdDsxJnF1b3Q7CiAgfQp9Cg=="}}),e._v(" "),d("h2",{attrs:{id:"grpc"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#grpc"}},[e._v("#")]),e._v(" gRPC")]),e._v(" "),d("p",[e._v("A user can query the "),d("code",[e._v("evidence")]),e._v(" module using gRPC endpoints.")]),e._v(" "),d("h3",{attrs:{id:"evidence-4"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#evidence-4"}},[e._v("#")]),e._v(" Evidence")]),e._v(" "),d("p",[e._v("Get evidence by hash")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Y29zbW9zLmV2aWRlbmNlLnYxYmV0YTEuUXVlcnkvRXZpZGVuY2UK"}}),e._v(" "),d("p",[e._v("Example:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Z3JwY3VybCAtcGxhaW50ZXh0IC1kICd7JnF1b3Q7ZXZpZGVuY2VfaGFzaCZxdW90OzomcXVvdDtERjBDMjNFODYzNEU0ODBGODRCOUQ1Njc0QTdDREM5ODE2NDY2REVDMjhBMzM1OEY3MzI2MEY2OEQyOEQ3NjYwJnF1b3Q7fScgbG9jYWxob3N0OjkwOTAgY29zbW9zLmV2aWRlbmNlLnYxYmV0YTEuUXVlcnkvRXZpZGVuY2UK"}}),e._v(" "),d("p",[e._v("Example Output:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ewogICZxdW90O2V2aWRlbmNlJnF1b3Q7OiB7CiAgICAmcXVvdDtjb25zZW5zdXNfYWRkcmVzcyZxdW90OzogJnF1b3Q7Y29zbW9zdmFsY29uczFudGs4ZXVhbGV3dXByejBnYW1oOGhudmNlbTJucmNkc2d6NTYzaCZxdW90OywKICAgICZxdW90O2hlaWdodCZxdW90OzogJnF1b3Q7MTEmcXVvdDssCiAgICAmcXVvdDtwb3dlciZxdW90OzogJnF1b3Q7MTAwJnF1b3Q7LAogICAgJnF1b3Q7dGltZSZxdW90OzogJnF1b3Q7MjAyMS0xMC0yMFQxNjowODozOC4xOTQwMTc2MjRaJnF1b3Q7CiAgfQp9Cg=="}}),e._v(" "),d("h3",{attrs:{id:"all-evidence-2"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#all-evidence-2"}},[e._v("#")]),e._v(" All evidence")]),e._v(" "),d("p",[e._v("Get all evidence")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Y29zbW9zLmV2aWRlbmNlLnYxYmV0YTEuUXVlcnkvQWxsRXZpZGVuY2UK"}}),e._v(" "),d("p",[e._v("Example:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"Z3JwY3VybCAtcGxhaW50ZXh0IGxvY2FsaG9zdDo5MDkwIGNvc21vcy5ldmlkZW5jZS52MWJldGExLlF1ZXJ5L0FsbEV2aWRlbmNlCg=="}}),e._v(" "),d("p",[e._v("Example Output:")]),e._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ewogICZxdW90O2V2aWRlbmNlJnF1b3Q7OiBbCiAgICB7CiAgICAgICZxdW90O2NvbnNlbnN1c19hZGRyZXNzJnF1b3Q7OiAmcXVvdDtjb3Ntb3N2YWxjb25zMW50azhldWFsZXd1cHJ6MGdhbWg4aG52Y2VtMm5yY2RzZ3o1NjNoJnF1b3Q7LAogICAgICAmcXVvdDtoZWlnaHQmcXVvdDs6ICZxdW90OzExJnF1b3Q7LAogICAgICAmcXVvdDtwb3dlciZxdW90OzogJnF1b3Q7MTAwJnF1b3Q7LAogICAgICAmcXVvdDt0aW1lJnF1b3Q7OiAmcXVvdDsyMDIxLTEwLTIwVDE2OjA4OjM4LjE5NDAxNzYyNFomcXVvdDsKICAgIH0KICBdLAogICZxdW90O3BhZ2luYXRpb24mcXVvdDs6IHsKICAgICZxdW90O3RvdGFsJnF1b3Q7OiAmcXVvdDsxJnF1b3Q7CiAgfQp9Cg=="}})],1)}),[],!1,null,null,null);a.default=l.exports}}]);